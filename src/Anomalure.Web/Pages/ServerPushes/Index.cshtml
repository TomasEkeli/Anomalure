@page
@model ServerPushesModel

<h1>Server Pushes</h1>

<div style="display: flex; gap: 20px;">
    <div style="flex: 1;">
        <h2>HTMX server-sent events</h2>
        <div
            id="htmx-sse-events"
            hx-ext="sse"
            sse-connect="/serverpushes/events?via=htmx"
            sse-swap="message"
            hx-swap="afterbegin">
        </div>
    </div>

    <div style="flex: 1;">
        <h2>JavaScript EventSource server-sent events</h2>
        <div id="events"></div>
    </div>
</div>

<script>
    const eventSource = new EventSource('/serverpushes/events');
    eventSource.onmessage = function(event) {
        const eventsDiv = document.getElementById('events');
        const newEvent = document.createElement('div');
        newEvent.textContent = event.data;
        eventsDiv.prepend(newEvent); // Append new events to the top
    };
</script>
